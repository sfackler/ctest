<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `TestGenerator` struct in crate `ctest`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, TestGenerator">

    <title>ctest::TestGenerator - Rust</title>

    <link rel="stylesheet" type="text/css" href="../normalize.css">
    <link rel="stylesheet" type="text/css" href="../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../main.css">
    

    
    
</head>
<body class="rustdoc struct">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        <p class='location'>Struct TestGenerator</p><div class="block items"><ul><li><a href="#methods">Methods</a></li></ul></div><p class='location'><a href='index.html'>ctest</a></p><script>window.sidebarCurrent = {name: 'TestGenerator', ty: 'struct', relpath: ''};</script><script defer src="sidebar-items.js"></script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content">
<h1 class='fqn'><span class='in-band'>Struct <a href='index.html'>ctest</a>::<wbr><a class="struct" href=''>TestGenerator</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a class='srclink' href='../src/ctest/lib.rs.html#47-66' title='goto source code'>[src]</a></span></h1>
<pre class='rust struct'>pub struct TestGenerator { /* fields omitted */ }</pre><div class='docblock'><p>A builder used to generate a test suite.</p>

<p>This builder has a number of configuration options which modify how the
generated tests are emitted, and it is also the main entry point for parsing
an FFI header crate for definitions.</p>
</div><h2 id='methods'>Methods</h2><h3 class='impl'><span class='in-band'><code>impl <a class="struct" href="../ctest/struct.TestGenerator.html" title="struct ctest::TestGenerator">TestGenerator</a></code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../src/ctest/lib.rs.html#85-746' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'><h4 id='method.new' class="method"><span id='new.v' class='invisible'><code>fn <a href='#method.new' class='fnname'>new</a>() -&gt; <a class="struct" href="../ctest/struct.TestGenerator.html" title="struct ctest::TestGenerator">TestGenerator</a></code></span></h4>
<div class='docblock'><p>Creates a new blank test generator.</p>

<p>This won&#39;t actually be that useful until functions like <code>header</code> are
called, but the main &quot;finalization method&quot; is the <code>generate</code> method.</p>
</div><h4 id='method.header' class="method"><span id='header.v' class='invisible'><code>fn <a href='#method.header' class='fnname'>header</a>(&amp;mut self, header: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>) -&gt; &amp;mut <a class="struct" href="../ctest/struct.TestGenerator.html" title="struct ctest::TestGenerator">TestGenerator</a></code></span></h4>
<div class='docblock'><p>Add a header to be included as part of the generated C file.</p>

<p>The generate C test will be compiled by a C compiler, and this can be
used to ensure that all the necessary header files are included to test
all FFI definitions.</p>

<h1 id='examples' class='section-header'><a href='#examples'>Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">env</span>;
<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">path</span>::<span class="ident">PathBuf</span>;

<span class="kw">use</span> <span class="ident">ctest</span>::<span class="ident">TestGenerator</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">cfg</span> <span class="op">=</span> <span class="ident">TestGenerator</span>::<span class="ident">new</span>();
<span class="ident">cfg</span>.<span class="ident">header</span>(<span class="string">&quot;foo.h&quot;</span>)
   .<span class="ident">header</span>(<span class="string">&quot;bar.h&quot;</span>);</pre>
</div><h4 id='method.include' class="method"><span id='include.v' class='invisible'><code>fn <a href='#method.include' class='fnname'>include</a>&lt;P:&nbsp;<a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/std/path/struct.Path.html" title="struct std::path::Path">Path</a>&gt;&gt;(&amp;mut self, p: P) -&gt; &amp;mut <a class="struct" href="../ctest/struct.TestGenerator.html" title="struct ctest::TestGenerator">TestGenerator</a></code></span></h4>
<div class='docblock'><p>Add a path to the C compiler header lookup path.</p>

<p>This is useful for if the C library is installed to a nonstandard
location to ensure that compiling the C file succeeds.</p>

<h1 id='examples-1' class='section-header'><a href='#examples-1'>Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">env</span>;
<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">path</span>::<span class="ident">PathBuf</span>;

<span class="kw">use</span> <span class="ident">ctest</span>::<span class="ident">TestGenerator</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">cfg</span> <span class="op">=</span> <span class="ident">TestGenerator</span>::<span class="ident">new</span>();
<span class="kw">let</span> <span class="ident">out_dir</span> <span class="op">=</span> <span class="ident">PathBuf</span>::<span class="ident">from</span>(<span class="ident">env</span>::<span class="ident">var_os</span>(<span class="string">&quot;OUT_DIR&quot;</span>).<span class="ident">unwrap</span>());
<span class="ident">cfg</span>.<span class="ident">include</span>(<span class="ident">out_dir</span>.<span class="ident">join</span>(<span class="string">&quot;include&quot;</span>));</pre>
</div><h4 id='method.flag' class="method"><span id='flag.v' class='invisible'><code>fn <a href='#method.flag' class='fnname'>flag</a>(&amp;mut self, flag: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>) -&gt; &amp;mut <a class="struct" href="../ctest/struct.TestGenerator.html" title="struct ctest::TestGenerator">TestGenerator</a></code></span></h4>
<div class='docblock'><p>Add a flag to the C compiler invocation.</p>

<p>This can be useful for tweaking the warning settings of the underlying
compiler.</p>

<h1 id='examples-2' class='section-header'><a href='#examples-2'>Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">env</span>;
<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">path</span>::<span class="ident">PathBuf</span>;

<span class="kw">use</span> <span class="ident">ctest</span>::<span class="ident">TestGenerator</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">cfg</span> <span class="op">=</span> <span class="ident">TestGenerator</span>::<span class="ident">new</span>();

<span class="comment">// if msvc</span>
<span class="ident">cfg</span>.<span class="ident">flag</span>(<span class="string">&quot;/wd4820&quot;</span>);

<span class="comment">// if gnu</span>
<span class="ident">cfg</span>.<span class="ident">flag</span>(<span class="string">&quot;-Wno-type-limits&quot;</span>);</pre>
</div><h4 id='method.out_dir' class="method"><span id='out_dir.v' class='invisible'><code>fn <a href='#method.out_dir' class='fnname'>out_dir</a>&lt;P:&nbsp;<a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/std/path/struct.Path.html" title="struct std::path::Path">Path</a>&gt;&gt;(&amp;mut self, p: P) -&gt; &amp;mut <a class="struct" href="../ctest/struct.TestGenerator.html" title="struct ctest::TestGenerator">TestGenerator</a></code></span></h4>
<div class='docblock'><p>Configures the output directory of the generated Rust and C code.</p>

<p>Note that for Cargo builds this defaults to <code>$OUT_DIR</code> and it&#39;s not
necessary to call.</p>

<h1 id='examples-3' class='section-header'><a href='#examples-3'>Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">ctest</span>::<span class="ident">TestGenerator</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">cfg</span> <span class="op">=</span> <span class="ident">TestGenerator</span>::<span class="ident">new</span>();
<span class="ident">cfg</span>.<span class="ident">out_dir</span>(<span class="string">&quot;path/to/output&quot;</span>);</pre>
</div><h4 id='method.target' class="method"><span id='target.v' class='invisible'><code>fn <a href='#method.target' class='fnname'>target</a>(&amp;mut self, target: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>) -&gt; &amp;mut <a class="struct" href="../ctest/struct.TestGenerator.html" title="struct ctest::TestGenerator">TestGenerator</a></code></span></h4>
<div class='docblock'><p>Configures the target to compile C code for.</p>

<p>Note that for Cargo builds this defaults to <code>$TARGET</code> and it&#39;s not
necessary to call.</p>

<h1 id='examples-4' class='section-header'><a href='#examples-4'>Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">ctest</span>::<span class="ident">TestGenerator</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">cfg</span> <span class="op">=</span> <span class="ident">TestGenerator</span>::<span class="ident">new</span>();
<span class="ident">cfg</span>.<span class="ident">target</span>(<span class="string">&quot;x86_64-unknown-linux-gnu&quot;</span>);</pre>
</div><h4 id='method.define' class="method"><span id='define.v' class='invisible'><code>fn <a href='#method.define' class='fnname'>define</a>(&amp;mut self, k: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>, v: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>&gt;) -&gt; &amp;mut <a class="struct" href="../ctest/struct.TestGenerator.html" title="struct ctest::TestGenerator">TestGenerator</a></code></span></h4>
<div class='docblock'><p>Set a <code>-D</code> flag for the C compiler being called.</p>

<p>This can be used to define various variables to configure how header
files are included or what APIs are exposed from header files.</p>

<h1 id='examples-5' class='section-header'><a href='#examples-5'>Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">ctest</span>::<span class="ident">TestGenerator</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">cfg</span> <span class="op">=</span> <span class="ident">TestGenerator</span>::<span class="ident">new</span>();
<span class="ident">cfg</span>.<span class="ident">define</span>(<span class="string">&quot;_GNU_SOURCE&quot;</span>, <span class="prelude-val">None</span>)
   .<span class="ident">define</span>(<span class="string">&quot;_WIN32_WINNT&quot;</span>, <span class="prelude-val">Some</span>(<span class="string">&quot;0x8000&quot;</span>));</pre>
</div><h4 id='method.cfg' class="method"><span id='cfg.v' class='invisible'><code>fn <a href='#method.cfg' class='fnname'>cfg</a>(&amp;mut self, k: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>, v: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>&gt;) -&gt; &amp;mut <a class="struct" href="../ctest/struct.TestGenerator.html" title="struct ctest::TestGenerator">TestGenerator</a></code></span></h4>
<div class='docblock'><p>Set a <code>--cfg</code> option with which to expand the Rust FFI crate.</p>

<p>By default the Rust code is run through expansion to determine what C
APIs are exposed (to allow differences across platforms). The <code>k</code>
argument is the <code>#[cfg]</code> value to define, and <code>v</code> is an optional value
for differentiating between <code>#[cfg(foo)]</code> and <code>#[cfg(foo = &quot;bar&quot;)]</code>.</p>

<h1 id='examples-6' class='section-header'><a href='#examples-6'>Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">ctest</span>::<span class="ident">TestGenerator</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">cfg</span> <span class="op">=</span> <span class="ident">TestGenerator</span>::<span class="ident">new</span>();
<span class="ident">cfg</span>.<span class="ident">cfg</span>(<span class="string">&quot;foo&quot;</span>, <span class="prelude-val">None</span>)
   .<span class="ident">cfg</span>(<span class="string">&quot;bar&quot;</span>, <span class="prelude-val">Some</span>(<span class="string">&quot;baz&quot;</span>));</pre>
</div><h4 id='method.type_name' class="method"><span id='type_name.v' class='invisible'><code>fn <a href='#method.type_name' class='fnname'>type_name</a>&lt;F&gt;(&amp;mut self, f: F) -&gt; &amp;mut <a class="struct" href="../ctest/struct.TestGenerator.html" title="struct ctest::TestGenerator">TestGenerator</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(&amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>, <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a> + 'static,&nbsp;</span></code></span></h4>
<div class='docblock'><p>Configures how a Rust type name is translated to a C type name.</p>

<p>The closure is given a Rust type name as well as a boolean indicating
wehther it&#39;s a struct or not.</p>

<p>The default behavior is that <code>struct foo</code> in Rust is translated to
<code>struct foo</code> in C, and <code>type foo</code> in Rust is translated to <code>foo</code> in C.
Some header files, however, have the convention that <code>struct foo_t</code> in
Rust should be <code>foo_t</code> in C, for example.</p>

<h1 id='examples-7' class='section-header'><a href='#examples-7'>Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">ctest</span>::<span class="ident">TestGenerator</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">cfg</span> <span class="op">=</span> <span class="ident">TestGenerator</span>::<span class="ident">new</span>();
<span class="ident">cfg</span>.<span class="ident">type_name</span>(<span class="op">|</span><span class="ident">ty</span>, <span class="ident">is_struct</span><span class="op">|</span> {
    <span class="kw">if</span> <span class="ident">is_struct</span> {
        <span class="macro">format</span><span class="macro">!</span>(<span class="string">&quot;{}_t&quot;</span>, <span class="ident">ty</span>)
    } <span class="kw">else</span> {
        <span class="ident">ty</span>.<span class="ident">to_string</span>()
    }
});</pre>
</div><h4 id='method.field_name' class="method"><span id='field_name.v' class='invisible'><code>fn <a href='#method.field_name' class='fnname'>field_name</a>&lt;F&gt;(&amp;mut self, f: F) -&gt; &amp;mut <a class="struct" href="../ctest/struct.TestGenerator.html" title="struct ctest::TestGenerator">TestGenerator</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(&amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>, &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a> + 'static,&nbsp;</span></code></span></h4>
<div class='docblock'><p>Configures how a Rust struct field is translated to a C struct field.</p>

<p>The closure is given a Rust struct name as well as a field within that
struct. The name of the corresponding field in C is then returned.</p>

<p>By default the field name in C just matches the field name in Rust, but
this is useful for fields which otherwise are named after keywords in
Rust (such as a field name of <code>type</code>).</p>

<h1 id='examples-8' class='section-header'><a href='#examples-8'>Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">ctest</span>::<span class="ident">TestGenerator</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">cfg</span> <span class="op">=</span> <span class="ident">TestGenerator</span>::<span class="ident">new</span>();
<span class="ident">cfg</span>.<span class="ident">field_name</span>(<span class="op">|</span><span class="ident">_s</span>, <span class="ident">field</span><span class="op">|</span> {
    <span class="ident">field</span>.<span class="ident">replace</span>(<span class="string">&quot;foo&quot;</span>, <span class="string">&quot;bar&quot;</span>)
});</pre>
</div><h4 id='method.skip_field' class="method"><span id='skip_field.v' class='invisible'><code>fn <a href='#method.skip_field' class='fnname'>skip_field</a>&lt;F&gt;(&amp;mut self, f: F) -&gt; &amp;mut <a class="struct" href="../ctest/struct.TestGenerator.html" title="struct ctest::TestGenerator">TestGenerator</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(&amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>, &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a> + 'static,&nbsp;</span></code></span></h4>
<div class='docblock'><p>Configures whether all tests for a field are skipped or not.</p>

<p>The closure is given a Rust struct name as well as a field within that
struct. A flag indicating whether the field should be tested for type,
size, offset, and alignment should be skipped or not.</p>

<p>By default all field properties are tested.</p>

<h1 id='examples-9' class='section-header'><a href='#examples-9'>Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">ctest</span>::<span class="ident">TestGenerator</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">cfg</span> <span class="op">=</span> <span class="ident">TestGenerator</span>::<span class="ident">new</span>();
<span class="ident">cfg</span>.<span class="ident">skip_field</span>(<span class="op">|</span><span class="ident">s</span>, <span class="ident">field</span><span class="op">|</span> {
    <span class="ident">s</span> <span class="op">==</span> <span class="string">&quot;foo_t&quot;</span> <span class="op">||</span> (<span class="ident">s</span> <span class="op">==</span> <span class="string">&quot;bar_t&quot;</span> <span class="op">&amp;&amp;</span> <span class="ident">field</span> <span class="op">==</span> <span class="string">&quot;bar&quot;</span>)
});</pre>
</div><h4 id='method.skip_field_type' class="method"><span id='skip_field_type.v' class='invisible'><code>fn <a href='#method.skip_field_type' class='fnname'>skip_field_type</a>&lt;F&gt;(&amp;mut self, f: F) -&gt; &amp;mut <a class="struct" href="../ctest/struct.TestGenerator.html" title="struct ctest::TestGenerator">TestGenerator</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(&amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>, &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a> + 'static,&nbsp;</span></code></span></h4>
<div class='docblock'><p>Configures whether tests for the type of a field is skipped or not.</p>

<p>The closure is given a Rust struct name as well as a field within that
struct. A flag indicating whether the field&#39;s type should be tested is
returned.</p>

<p>By default all field properties are tested.</p>

<h1 id='examples-10' class='section-header'><a href='#examples-10'>Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">ctest</span>::<span class="ident">TestGenerator</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">cfg</span> <span class="op">=</span> <span class="ident">TestGenerator</span>::<span class="ident">new</span>();
<span class="ident">cfg</span>.<span class="ident">skip_field_type</span>(<span class="op">|</span><span class="ident">s</span>, <span class="ident">field</span><span class="op">|</span> {
    <span class="ident">s</span> <span class="op">==</span> <span class="string">&quot;foo_t&quot;</span> <span class="op">||</span> (<span class="ident">s</span> <span class="op">==</span> <span class="string">&quot;bar_t&quot;</span> <span class="op">&amp;&amp;</span> <span class="ident">field</span> <span class="op">==</span> <span class="string">&quot;bar&quot;</span>)
});</pre>
</div><h4 id='method.skip_signededness' class="method"><span id='skip_signededness.v' class='invisible'><code>fn <a href='#method.skip_signededness' class='fnname'>skip_signededness</a>&lt;F&gt;(&amp;mut self, f: F) -&gt; &amp;mut <a class="struct" href="../ctest/struct.TestGenerator.html" title="struct ctest::TestGenerator">TestGenerator</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(&amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a> + 'static,&nbsp;</span></code></span></h4>
<div class='docblock'><p>Configures whether a types signededness is tested or not.</p>

<p>The closure is given the name of a Rust type, and returns whether the
type should be tested as having the right sign (positive or negative).</p>

<p>By default all signededness checks are performed.</p>

<h1 id='examples-11' class='section-header'><a href='#examples-11'>Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">ctest</span>::<span class="ident">TestGenerator</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">cfg</span> <span class="op">=</span> <span class="ident">TestGenerator</span>::<span class="ident">new</span>();
<span class="ident">cfg</span>.<span class="ident">skip_signededness</span>(<span class="op">|</span><span class="ident">s</span><span class="op">|</span> {
    <span class="ident">s</span>.<span class="ident">starts_with</span>(<span class="string">&quot;foo_&quot;</span>)
});</pre>
</div><h4 id='method.skip_fn' class="method"><span id='skip_fn.v' class='invisible'><code>fn <a href='#method.skip_fn' class='fnname'>skip_fn</a>&lt;F&gt;(&amp;mut self, f: F) -&gt; &amp;mut <a class="struct" href="../ctest/struct.TestGenerator.html" title="struct ctest::TestGenerator">TestGenerator</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(&amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a> + 'static,&nbsp;</span></code></span></h4>
<div class='docblock'><p>Configures whether tests for a function definition are generated.</p>

<p>The closure is given the name of a Rust FFI function and returns whether
test will be generated.</p>

<p>By default a functions signature is checked along with the function
pointer pointing to the same location as well.</p>

<h1 id='examples-12' class='section-header'><a href='#examples-12'>Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">ctest</span>::<span class="ident">TestGenerator</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">cfg</span> <span class="op">=</span> <span class="ident">TestGenerator</span>::<span class="ident">new</span>();
<span class="ident">cfg</span>.<span class="ident">skip_fn</span>(<span class="op">|</span><span class="ident">s</span><span class="op">|</span> {
    <span class="ident">s</span>.<span class="ident">starts_with</span>(<span class="string">&quot;foo_&quot;</span>)
});</pre>
</div><h4 id='method.skip_fn_ptrcheck' class="method"><span id='skip_fn_ptrcheck.v' class='invisible'><code>fn <a href='#method.skip_fn_ptrcheck' class='fnname'>skip_fn_ptrcheck</a>&lt;F&gt;(&amp;mut self, f: F) -&gt; &amp;mut <a class="struct" href="../ctest/struct.TestGenerator.html" title="struct ctest::TestGenerator">TestGenerator</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(&amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a> + 'static,&nbsp;</span></code></span></h4>
<div class='docblock'><p>Configures whether tests for a function pointer&#39;s value are generated.</p>

<p>The closure is given the name of a Rust FFI function and returns whether
the test will be generated.</p>

<p>By default generated tests will ensure that the function pointer in C
corresponds to the same function pointer in Rust. This can often
unconver subtle symbol naming issues where a header file is referenced
through the C identifier <code>foo</code> but the underlying symbol is mapped to
something like <code>__foo_compat</code>.</p>
</div><h4 id='method.skip_const' class="method"><span id='skip_const.v' class='invisible'><code>fn <a href='#method.skip_const' class='fnname'>skip_const</a>&lt;F&gt;(&amp;mut self, f: F) -&gt; &amp;mut <a class="struct" href="../ctest/struct.TestGenerator.html" title="struct ctest::TestGenerator">TestGenerator</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(&amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a> + 'static,&nbsp;</span></code></span></h4>
<div class='docblock'><p>Configures whether the tests for a constant&#39;s value are generated.</p>

<p>The closure is given the name of a Rust constant and returns whether the
test will be generated.</p>

<p>By default all constant values are verified.</p>

<h1 id='examples-13' class='section-header'><a href='#examples-13'>Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">ctest</span>::<span class="ident">TestGenerator</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">cfg</span> <span class="op">=</span> <span class="ident">TestGenerator</span>::<span class="ident">new</span>();
<span class="ident">cfg</span>.<span class="ident">skip_const</span>(<span class="op">|</span><span class="ident">s</span><span class="op">|</span> {
    <span class="ident">s</span>.<span class="ident">starts_with</span>(<span class="string">&quot;FOO_&quot;</span>)
});</pre>
</div><h4 id='method.skip_type' class="method"><span id='skip_type.v' class='invisible'><code>fn <a href='#method.skip_type' class='fnname'>skip_type</a>&lt;F&gt;(&amp;mut self, f: F) -&gt; &amp;mut <a class="struct" href="../ctest/struct.TestGenerator.html" title="struct ctest::TestGenerator">TestGenerator</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(&amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a> + 'static,&nbsp;</span></code></span></h4>
<div class='docblock'><p>Configures whether the tests for a typedef are emitted.</p>

<p>The closure is passed the name of a Rust typedef and returns whether the
tests are generated.</p>

<p>By default existence of a typedef is checked.</p>

<h1 id='examples-14' class='section-header'><a href='#examples-14'>Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">ctest</span>::<span class="ident">TestGenerator</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">cfg</span> <span class="op">=</span> <span class="ident">TestGenerator</span>::<span class="ident">new</span>();
<span class="ident">cfg</span>.<span class="ident">skip_type</span>(<span class="op">|</span><span class="ident">s</span><span class="op">|</span> {
    <span class="ident">s</span>.<span class="ident">starts_with</span>(<span class="string">&quot;foo_&quot;</span>)
});</pre>
</div><h4 id='method.skip_struct' class="method"><span id='skip_struct.v' class='invisible'><code>fn <a href='#method.skip_struct' class='fnname'>skip_struct</a>&lt;F&gt;(&amp;mut self, f: F) -&gt; &amp;mut <a class="struct" href="../ctest/struct.TestGenerator.html" title="struct ctest::TestGenerator">TestGenerator</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(&amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a> + 'static,&nbsp;</span></code></span></h4>
<div class='docblock'><p>Configures whether the tests for a struct are emitted.</p>

<p>The closure is passed the name of a Rust struct and returns whether the
tests are generated.</p>

<p>By default structs undergo tests such as size, alignment, existence,
field offset, etc.</p>

<h1 id='examples-15' class='section-header'><a href='#examples-15'>Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">ctest</span>::<span class="ident">TestGenerator</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">cfg</span> <span class="op">=</span> <span class="ident">TestGenerator</span>::<span class="ident">new</span>();
<span class="ident">cfg</span>.<span class="ident">skip_struct</span>(<span class="op">|</span><span class="ident">s</span><span class="op">|</span> {
    <span class="ident">s</span>.<span class="ident">starts_with</span>(<span class="string">&quot;foo_&quot;</span>)
});</pre>
</div><h4 id='method.fn_cname' class="method"><span id='fn_cname.v' class='invisible'><code>fn <a href='#method.fn_cname' class='fnname'>fn_cname</a>&lt;F&gt;(&amp;mut self, f: F) -&gt; &amp;mut <a class="struct" href="../ctest/struct.TestGenerator.html" title="struct ctest::TestGenerator">TestGenerator</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(&amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>, <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>&gt;) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a> + 'static,&nbsp;</span></code></span></h4>
<div class='docblock'><p>Configures the name of a function in the generate C code.</p>

<p>The closure is passed the Rust name of a function as well as any
optional <code>#[link_name]</code> specified.</p>

<p>By default the name of the generated C reference is the same as the Rust
function. This is useful, however, if different naming conventions are
used in Rust than are present in C (which is discouraged, however).</p>

<h1 id='examples-16' class='section-header'><a href='#examples-16'>Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">ctest</span>::<span class="ident">TestGenerator</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">cfg</span> <span class="op">=</span> <span class="ident">TestGenerator</span>::<span class="ident">new</span>();
<span class="ident">cfg</span>.<span class="ident">fn_cname</span>(<span class="op">|</span><span class="ident">rust</span>, <span class="ident">link_name</span><span class="op">|</span> <span class="ident">link_name</span>.<span class="ident">unwrap_or</span>(<span class="ident">rust</span>).<span class="ident">to_string</span>());</pre>
</div><h4 id='method.generate' class="method"><span id='generate.v' class='invisible'><code>fn <a href='#method.generate' class='fnname'>generate</a>&lt;P:&nbsp;<a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/std/path/struct.Path.html" title="struct std::path::Path">Path</a>&gt;&gt;(&amp;mut self, krate: P, out_file: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>)</code></span></h4>
<div class='docblock'><p>Generate all tests.</p>

<p>This function is first given the path to the <code>*-sys</code> crate which is
being tested along with an output file from where to generate the Rust
side of the tests.</p>

<p>This function does not consume the builder, but it is expected that all
configuration has happened prior to calling this function.</p>

<p>This will also generate the corresponding C side of the tests and
compile it.</p>

<h1 id='examples-17' class='section-header'><a href='#examples-17'>Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">ctest</span>::<span class="ident">TestGenerator</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">cfg</span> <span class="op">=</span> <span class="ident">TestGenerator</span>::<span class="ident">new</span>();
<span class="ident">cfg</span>.<span class="ident">generate</span>(<span class="string">&quot;../path/to/libfoo-sys/lib.rs&quot;</span>, <span class="string">&quot;all.rs&quot;</span>);</pre>
</div></div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt>+</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../";
        window.currentCrate = "ctest";
    </script>
    <script src="../main.js"></script>
    <script defer src="../search-index.js"></script>
</body>
</html>